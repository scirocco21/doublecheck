{"ast":null,"code":"import _classCallCheck from \"/Users/sebastiangertz/.atom/.learn-ide/home/scirocco21/doublecheck-react-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sebastiangertz/.atom/.learn-ide/home/scirocco21/doublecheck-react-app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sebastiangertz/.atom/.learn-ide/home/scirocco21/doublecheck-react-app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sebastiangertz/.atom/.learn-ide/home/scirocco21/doublecheck-react-app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sebastiangertz/.atom/.learn-ide/home/scirocco21/doublecheck-react-app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sebastiangertz/.atom/.learn-ide/home/scirocco21/doublecheck-react-app/client/src/Containers/ResultsContainer.js\";\nimport React, { Component } from 'react';\nimport { Button } from 'reactstrap';\nimport Result from '../Components/Result.js';\nimport { connect } from 'react-redux';\nimport { fetchProjects as _fetchProjects } from '../Actions/index.js';\n\nvar ResultsContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ResultsContainer, _Component);\n\n  function ResultsContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ResultsContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ResultsContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.saveProject = function () {\n      var _this$props = _this.props,\n          history = _this$props.history,\n          project = _this$props.project;\n      fetch('/api/save', {\n        method: 'POST',\n        body: JSON.stringify({\n          // build well-structured params hash that will match Rails' expectations (sentences/tones must be *_attributes in order to be whitelisted)\n          project: {\n            img: project.img,\n            title: project.title,\n            text: project.text,\n            sentences_attributes: project.sentences.map(function (sentence) {\n              return {\n                \"text\": sentence.text,\n                tones_attributes: sentence.tones.map(function (tone) {\n                  return {\n                    tone_name: tone.tone_name,\n                    score: tone.score\n                  };\n                })\n              };\n            }),\n            tones_attributes: project.tones\n          }\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this.props.project.id = data.project.id;\n      }).then(function (id) {\n        return history.push(\"/projects\");\n      }).catch(function (error) {\n        return console.error('Error:', error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ResultsContainer, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(Result, {\n        project: this.props.project,\n        saveProject: this.saveProject,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ResultsContainer;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  var project = state.projects.find(function (project) {\n    return project.idx === +ownProps.match.params.projectId;\n  });\n\n  if (project) {\n    return {\n      project: project\n    };\n  } else {\n    return {\n      project: {}\n    };\n  }\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchProjects: function fetchProjects() {\n      return dispatch(_fetchProjects());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResultsContainer);","map":{"version":3,"sources":["/Users/sebastiangertz/.atom/.learn-ide/home/scirocco21/doublecheck-react-app/client/src/Containers/ResultsContainer.js"],"names":["React","Component","Button","Result","connect","fetchProjects","ResultsContainer","saveProject","props","history","project","fetch","method","body","JSON","stringify","img","title","text","sentences_attributes","sentences","map","sentence","tones_attributes","tones","tone","tone_name","score","headers","then","res","json","data","id","push","catch","error","console","mapStateToProps","state","ownProps","projects","find","idx","match","params","projectId","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react';\nimport { Button } from 'reactstrap';\nimport Result from '../Components/Result.js';\nimport { connect } from 'react-redux';\nimport { fetchProjects } from '../Actions/index.js'\n\nclass ResultsContainer extends Component {\n  saveProject = () => {\n    const { history, project } = this.props;\n    fetch('/api/save', {\n      method: 'POST',\n      body: JSON.stringify({\n        // build well-structured params hash that will match Rails' expectations (sentences/tones must be *_attributes in order to be whitelisted)\n        project: {\n          img: project.img,\n          title: project.title,\n          text: project.text,\n          sentences_attributes: project.sentences.map(\n            sentence => (\n              {\n                \"text\": sentence.text,\n                tones_attributes: sentence.tones.map(\n                  tone => (\n                    {\n                      tone_name: tone.tone_name,\n                      score: tone.score\n                    }\n                  )\n                )\n              }\n            )\n          ),\n          tones_attributes: project.tones\n        }\n      }),\n      headers:{\n        'Content-Type': 'application/json'\n      }\n    }).then((res) => res.json()).then((data) =>  {this.props.project.id = data.project.id}).then((id) => history.push(\"/projects\")).catch(error => console.error('Error:', error));\n  }\n\n  render() {\n    return (\n      <div>\n        <Result project={this.props.project} saveProject={this.saveProject} />\n        <div className=\"text-center\">\n        </div>\n      </div>\n      )\n    }\n  }\n\nconst mapStateToProps = (state, ownProps) => {\n  const project = state.projects.find(project => project.idx === +ownProps.match.params.projectId)\n    if (project) {\n      return { project }\n    } else {\n      return { project: {} }\n    }\n  }\n\nconst mapDispatchToProps = dispatch => ({\n  fetchProjects: () => dispatch(fetchProjects())\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResultsContainer);\n"]},"metadata":{},"sourceType":"module"}